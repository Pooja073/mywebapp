pipeline{
  agent any
  environment{
      DOCKER_CREDENTIALS=credentials('dockerhubId')
      IMAGE_NAME="poojab073/mywebapp"
  }
  stages{
      stage('checkout'){
         steps{
            git(
              url:'https://github.com/pooja073/mywebapp',
              branch:'main',
              credentialsId:'dockerhubId'
          }
    }
}
stage('Build Docker Image'){
  steps{
    script{
        docker.withRegistry('https://index.docker .io/v1/','dockerhub'){
          dockerImage.push()
        }
      }
    }
  }
}
post{
  always{
    echo 'cleaning up workspace'
    deleteDir()
    }
    success{
      echo'pipeline succeeded'
    }
    failure{
      echo'pipeline failed'
    }
  }
}
